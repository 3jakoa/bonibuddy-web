<!doctype html>
<html lang="{{ get_locale }}">
<head>
  <meta charset="utf-8">
  <title>BoniBuddy • Dodaj plan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg: #F6FBFE;
      --card: #ffffff;
      --card2: #ffffff;
      --text: #111111;
      --muted: #5F6F7A;
      --disabled: #9ca3af;
      --border: rgba(0,166,246,0.18);
      --accent: #00A6F6;
      --accent-light: #92DBF3;
      --radius: 18px;
      --shadow: 0 12px 32px rgba(0,166,246,0.10);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background: var(--bg);
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:100%;
      max-width:420px;
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:22px 20px 24px;
      backdrop-filter: blur(10px);
    }
    h1{margin:0 0 10px; font-size:21px;}
    .muted{color:var(--muted); font-size:14px; line-height:1.4; margin-bottom:18px;}
    a.btn{display:inline-block; padding:12px 14px; border-radius:14px; border:1px solid var(--accent); background: var(--accent); color:#ffffff; text-decoration:none; transition: background 0.2s ease; box-shadow: 0 6px 16px rgba(0,166,246,0.12);}
    a.btn:hover{background:#008ed5;}
    .lang-toggle{
      position:absolute;
      top:12px; left:12px;
      width:40px; height:40px;
      border-radius:50%;
      border:1.25px solid var(--accent);
      overflow:hidden;
      padding:0;
      background: #ffffff;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(0,166,246,0.12);
      display:flex; align-items:center; justify-content:center;
      transition: background 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
    }
    .lang-toggle:hover, .lang-toggle:focus{
      background: rgba(0,166,246,0.08);
      box-shadow: 0 10px 20px rgba(0,166,246,0.16);
      outline:none;
    }
    .lang-toggle:active{transform: scale(0.97);}
    .lang-toggle img{width:100%; height:100%; object-fit:cover; display:block;}
  </style>
</head>
<body>
  <div class="card" style="position:relative;">
    {% set lang = get_locale %}
    {% set flag_src = '/static/img/flags/sl.png' if lang == 'sl' else '/static/img/flags/en.png' %}
    <button type="button" class="lang-toggle" aria-label="{{ _('Preklopi jezik') }}" data-current-lang="{{ lang }}">
      <img src="{{ flag_src }}" alt="{{ _('Jezik') }}">
    </button>
    <h1>{{ _("Dodaj svoj plan") }}</h1>
    <div class="muted">{{ _("Dodaj svoj načrt (prihaja). Trenutno pripravljamo obrazec.") }}</div>
    {% if restaurant %}
      <div class="muted">{{ _("Izbrana menza:") }} <strong>{{ restaurant.name }}</strong></div>
    {% elif loc_label %}
      <div class="muted">{{ _("Izbrana lokacija:") }} <strong>{{ loc_label }}</strong></div>
    {% endif %}
    <a class="btn" href="/">{{ _("Nazaj") }}</a>
  </div>
  <script>
    (function() {
      const btn = document.querySelector('.lang-toggle');
      if (!btn) return;
      btn.addEventListener('click', () => {
        const current = btn.dataset.currentLang === 'en' ? 'en' : 'sl';
        const next = current === 'sl' ? 'en' : 'sl';
        document.cookie = `lang=${next};path=/;max-age=${60 * 60 * 24 * 365};samesite=lax`;
        window.location.reload();
      });
    })();
  </script>
</body>
</html>
